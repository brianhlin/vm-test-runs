###################
# OSG 3.2 to 3.3 update tests
# File format documention:
# https://twiki.opensciencegrid.org/bin/view/SoftwareTeam/TestRunsAsVMs
###################

platform:
  - centos_6_x86_64
  - rhel_6_x86_64
  - sl_6_x86_64

sources:
  ###################
  # Format:
  # [<Github account>:<osg-test branch>;] <OSG ver>; <REPO 1, REPO 2...REPO N> [> <Update OSG ver>/<Update REPO 1, REPO 2...REPO N>]
  # Example:
  # Run osg-test with packages from 3.2-release and 3.2-testing that are then upgraded to 3.3-testing and 3-3-upcoming-testing:
  # 3.2; osg, osg-testing > 3.3/osg-testing, osg-upcoming-testing
  ###################
  - opensciencegrid:master; 3.2; osg > 3.3/osg
  - opensciencegrid:master; 3.2; osg > 3.3/osg-testing

package_sets:
  #### Required ####
  # label - used for reporting, should be consistent across param files
  # packages - list of packages to install in the test run
  #### Optional ####
  # selinux - enable SELinux for the package set, otherwise Permissive mode (default: False)
  # osg_java - Pre-install OSG java packages (default: True)
  ##################
  - label: All
    selinux: False
    osg_java: True
    packages:
      - osg-tested-internal
  # Explicitly add GRAM packages since they were dropped from osg-ce (SOFTWARE-2278, SOFTWARE-2291)
  - label: All + GRAM (3.2)
    selinux: False
    osg_java: True
    packages:
      - osg-tested-internal
      - globus-gatekeeper
      - globus-gram-client-tools
      - globus-gram-job-manager
      - globus-gram-job-manager-fork
      - globus-gram-job-manager-fork-setup-poll
      - gratia-probe-gram
      - globus-gram-job-manager-scripts
      - globus-gram-job-manager-condor
      - globus-gram-job-manager-pbs-setup-seg
  - label: HTCondor
    selinux: False
    osg_java: True
    packages:
      - condor.x86_64
      - osg-ce-condor
      - rsv
  - label: GridFTP
    selinux: True
    osg_java: True
    packages:
      - java-1.7.0-openjdk-devel
      - osg-java7-compat
      - osg-java7-devel-compat
      - osg-gridftp
      - edg-mkgridmap
      - rsv
  - label: BeStMan
    selinux: False
    osg_java: True
    packages:
      - osg-se-bestman
      - rsv
  - label: VOMS
    selinux: False
    osg_java: True
    packages:
      - osg-voms
      - rsv
  - label: GUMS
    selinux: False
    osg_java: True
    packages:
      - osg-gums
      - rsv
